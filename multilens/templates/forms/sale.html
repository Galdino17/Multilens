{% extends "base.html" %}
{% from "macros/sales.html" import render_table_sales %}
{% from "macros/render_messages.html" import render_message %}

{% block extra_scripts %}
<script src="{{ url_for('static', filename='js/sales.js') }}" type="text/javascript"></script>
{% endblock extra_scripts %}

{% block body %}
{{render_message()}}
<article class="panel {{ color_theme }}">
    <div class="panel-heading">Fórmulario de venda</div>
    <div class="form-body">
        <form method="POST">
            {{ form.csrf_token }}

            <div class="field is-grouped is-grouped-multiline">
                <div class="control">
                    <div class="field is-horizontal">
                        <div class="field-label is-normal">
                            <label class="label">{{ form.product_id.label}}</label>
                        </div>
                        <div class="control">
                            <div class="select">
                                {{ form.product_id(id="product") }}
                            </div>
                        </div>
                    </div>
                </div>
                <div class="control">
                    <div class="field is-horizontal">
                        <div class="field-label is-normal">
                            <label class="label">{{ form.amount.label}}</label>
                        </div>
                        <div class="control">
                            {{ form.amount(class="input", id="amount") }}
                        </div>
                    </div>
                </div>
                <div class="control">
                    <div class="field is-horizontal">
                        <div class="field-label is-normal">
                            <label class="label">ﾠ</label>
                        </div>
                        <div class="control">
                            <button class="button {{ color_theme }}">Adicionar</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="field">
                <div class="table-container">
                    {{ render_table_sales(order) }}
                </div>
                <div class="field">
                    <div class="control is-expanded">
                        <label class="label">ﾠ</label>
                        <a href="{{ url_for('site.finish_sale') }}" class="button is-fullwidth {{ color_theme }}">
                            Finalizar pedido</a>
                    </div>
                </div>
            </div>
    </div>
    </form>
</article>
{% endblock body %}